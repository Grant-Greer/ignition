volume:
  name: postgres-data
  mode: writeable
  size: 50M
---
machine:
  image: ghcr.io/lttle-cloud/postgres:17-flash
  name: postgres-test
  resources:
    cpu: 1
    memory: 512
  mode:
    flash:
      strategy: manual
      timeout: 2
    # listen-on-port: 5432
  volumes:
    - name: postgres-data
      path: /var/lib/postgresql/data
  environment:
    POSTGRES_PASSWORD: password
    POSTGRES_USER: postgres
    POSTGRES_DB: postgres
---
service:
  name: postgres-test
  target:
    name: postgres-test
    port: 5432
    protocol: tcp
    connection-tracking:
      traffic-aware:
        inactivity-timeout: 3
  bind:
    external:
      host: pgtest.alpha1.ovh-rbx.lttle.host
      protocol: tls
