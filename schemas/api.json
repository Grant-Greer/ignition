{
  "services": [
    {
      "name": "Core",
      "tag": "core",
      "crate_path": "resources::core",
      "namespaced": false,
      "methods": [
        {
          "name": "me",
          "verb": "GET",
          "path": [
            {
              "type": "static",
              "value": "core"
            },
            {
              "type": "static",
              "value": "me"
            }
          ],
          "request": null,
          "response": {
            "type": "schema",
            "list": false,
            "optional": false,
            "name": "Me"
          }
        }
      ]
    },
    {
      "name": "Machine",
      "tag": "machine",
      "crate_path": "resources::machine",
      "namespaced": true,
      "methods": [
        {
          "name": "get",
          "verb": "GET",
          "path": [
            {
              "type": "static",
              "value": "machine"
            },
            {
              "type": "resource_name"
            }
          ],
          "request": null,
          "response": {
            "type": "tuple",
            "list": false,
            "optional": false,
            "names": [
              "MachineV2",
              "MachineStatus"
            ]
          }
        },
        {
          "name": "list",
          "verb": "GET",
          "path": [
            {
              "type": "static",
              "value": "machine"
            }
          ],
          "request": null,
          "response": {
            "type": "tuple",
            "list": true,
            "optional": false,
            "names": [
              "MachineV2",
              "MachineStatus"
            ]
          }
        },
        {
          "name": "apply",
          "verb": "PUT",
          "path": [
            {
              "type": "static",
              "value": "machine"
            }
          ],
          "request": {
            "type": "schema",
            "name": "Machine"
          },
          "response": null
        },
        {
          "name": "get_status",
          "verb": "GET",
          "path": [
            {
              "type": "static",
              "value": "machine"
            },
            {
              "type": "resource_name"
            },
            {
              "type": "static",
              "value": "status"
            }
          ],
          "request": null,
          "response": {
            "type": "schema",
            "list": false,
            "optional": false,
            "name": "MachineStatus"
          }
        }
      ]
    }
  ],
  "defs": {
    "Me": {
      "type": "object",
      "properties": {
        "tenant": {
          "type": "string"
        }
      },
      "required": [
        "tenant"
      ],
      "title": "Me",
      "$schema": "https://json-schema.org/draft/2020-12/schema"
    },
    "Machine": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "machine": {
              "$ref": "#/$defs/MachineV2"
            }
          },
          "required": [
            "machine"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "machine.v1": {
              "$ref": "#/$defs/MachineV1"
            }
          },
          "required": [
            "machine.v1"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "machine.v2": {
              "$ref": "#/$defs/MachineV2"
            }
          },
          "required": [
            "machine.v2"
          ],
          "additionalProperties": false
        }
      ]
    },
    "MachineStatus": {
      "type": "object",
      "properties": {
        "test": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "test"
      ]
    },
    "MachineV2": {
      "type": "object",
      "properties": {
        "namespace": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "bleah": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "bleah2": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "name",
        "bleah",
        "bleah2"
      ]
    },
    "MachineV1": {
      "type": "object",
      "properties": {
        "namespace": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "bleah": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "name",
        "bleah"
      ]
    }
  }
}